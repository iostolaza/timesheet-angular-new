<!-- src/app/financial/account-list.component.html -->
<!-- Updated: Added create button, edit button, manage charge codes button, MatDialog import -->

<div class="container p-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Account List</h1>
    <button mat-raised-button color="primary" (click)="openCreateAccountDialog()">Create Account</button>
  </div>
  <table mat-table [dataSource]="dataSource" class="w-full table-auto border-collapse border border-gray-300">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef class="border p-2">Name</th>
      <td mat-cell *matCellDef="let acct" class="border p-2">{{ acct.name }}</td>
    </ng-container>
    <ng-container matColumnDef="accountNumber">
      <th mat-header-cell *matHeaderCellDef class="border p-2">Account Number</th>
      <td mat-cell *matCellDef="let acct" class="border p-2">{{ acct.accountNumber }}</td>
    </ng-container>
    <ng-container matColumnDef="details">
      <th mat-header-cell *matHeaderCellDef class="border p-2">Details</th>
      <td mat-cell *matCellDef="let acct" class="border p-2">{{ acct.details }}</td>
    </ng-container>
    <ng-container matColumnDef="balance">
      <th mat-header-cell *matHeaderCellDef class="border p-2">Balance</th>
      <td mat-cell *matCellDef="let acct" class="border p-2">{{ acct.balance | currency }}</td>
    </ng-container>
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="border p-2">Actions</th>
      <td mat-cell *matCellDef="let acct" class="border p-2">
        <button mat-icon-button (click)="editAccount(acct.id)" color="primary">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-button (click)="openLedger(acct.id)" class="bg-blue-500 text-white px-2 py-1 rounded mr-2">View Ledger</button>
        <button mat-button *ngIf="canPost(acct)" (click)="openChargeModal(acct)" class="bg-gray-500 text-white px-2 py-1 rounded mr-2">Request Charge</button>
        <button mat-button (click)="manageChargeCodes(acct)" class="bg-green-500 text-white px-2 py-1 rounded">Manage Charge Codes</button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>