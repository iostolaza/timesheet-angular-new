
<!-- src/app/financial/charge-codes-dialog.component.html -->

<div class="bg-white rounded-2xl shadow-xl p-6 max-h-[80vh] overflow-y-auto">
  <!-- Header Section -->
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Manage Charge Code: {{ data.chargeCodeName }}</h2>
  <div *ngIf="errorMessage" class="text-red-500 text-sm mb-4" role="alert">{{ errorMessage }}</div>

  <!-- Charge Code Details Section -->
  <div class="mb-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-2">Charge Code Details</h3>
    <p class="text-gray-700"><strong>Name:</strong> {{ data.chargeCodeName }}</p>
    <p class="text-gray-700"><strong>Linked Account:</strong> {{ data.account.accountNumber || 'N/A' }}</p> <!-- Modified: Removed optional chain -->
  </div>

  <!-- Separator -->
  <hr class="my-6 border-gray-200">

  <!-- Group Members Section -->
  <div>
    <h3 class="text-lg font-semibold text-gray-800 mb-2">Group Members</h3>
    <div class="mb-4">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (input)="searchUsers()"
        class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"
        placeholder="Search users by email"
        aria-label="Search users"
      />
    </div>
    <mat-selection-list [formControl]="selectedUsers" class="divide-y divide-gray-200">
      <mat-list-option *ngFor="let user of filteredUsers" [value]="user.email" class="py-2 text-gray-700">
        {{ user.name }} ({{ user.email }})
      </mat-list-option>
    </mat-selection-list>
    <div *ngIf="filteredUsers.length === 0" class="text-gray-600 mt-2">No users found</div>
  </div>

  <!-- Buttons Section -->
  <div class="mt-6 flex justify-end gap-3">
    <button mat-button class="border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-100" (click)="dialogRef.close()" aria-label="Cancel">Cancel</button>
    <button
      mat-raised-button
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md"
      (click)="save()"
      aria-label="Save charge code users"
    >Save</button>
  </div>
</div>