
<!-- src/app/timesheet/timesheet-form/timesheet-form.component.html -->

<div class="dialog">
  <h2 mat-dialog-title>{{ data.mode === 'edit' ? 'Edit Time Entry' : 'Add Time Entry' }}</h2>
  <mat-dialog-content>
    <form [formGroup]="timesheetForm" class="space-y-4">
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="date">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error *ngIf="timesheetForm.get('date')?.hasError('required')" class="error">Date is required</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Start Time (HH:mm)</mat-label>
        <input matInput formControlName="startTime" placeholder="e.g., 09:00">
        <mat-error *ngIf="timesheetForm.get('startTime')?.hasError('pattern')" class="error">Use HH:mm format (e.g., 09:00)</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>End Time (HH:mm)</mat-label>
        <input matInput formControlName="endTime" placeholder="e.g., 12:00">
        <mat-error *ngIf="timesheetForm.get('endTime')?.hasError('pattern')" class="error">Use HH:mm format (e.g., 12:00)</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Hours</mat-label>
        <input matInput type="number" formControlName="hours" readonly>
        <mat-error *ngIf="timesheetForm.get('hours')?.hasError('required')" class="error">Hours are required</mat-error>
        <mat-error *ngIf="timesheetForm.get('hours')?.hasError('min')" class="error">Hours must be positive</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Account</mat-label>
        <mat-select formControlName="accountId">
          <mat-option *ngFor="let account of accounts" [value]="account.id">{{ account.name }}</mat-option>
        </mat-select>
        <mat-error *ngIf="timesheetForm.get('accountId')?.hasError('required')" class="error">Account is required</mat-error>
      </mat-form-field>
      <mat-form-field appearance="fill" class="form-field">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description"></textarea>
        <mat-error *ngIf="timesheetForm.get('description')?.hasError('required')" class="error">Description is required</mat-error>
      </mat-form-field>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions class="flex justify-end gap-2">
    <button mat-button class="btn btn-outline" (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" class="btn btn-primary" [disabled]="timesheetForm.invalid" (click)="onSubmit()">Save</button>
  </mat-dialog-actions>
</div>